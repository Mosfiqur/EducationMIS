<div class="p-4">
  <div class="row">
    <div class="col-12 site-maincontent-ctl">
      <div>

        <h1 class="pb-3 mb-0">
          Facilities
        </h1>
        <div>
          <div class="my-4 pb-1">
            <a [routerLink]="['/unicef/facility/single-facility-create']" class="site-btn-primary py-2 px-3"><span> Add
                New Facility </span></a>
          </div>

        </div>
        <div class="d-flex flex-wrap">
          <div class="flex-grow-1 mr-2">
            <div class="input-group mb-3 searchbox-with-filter">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <a class="filter-btn" type="button" data-toggle="collapse" data-target="#filter-main"
                    aria-expanded="false" aria-controls="collapseTwo">
                    <span class="px-2">Filter By</span>
                    <i class="fas fa-chevron-down pr-3"></i>
                  </a>

                </span>

              </div>
              <input type="text" placeholder="Search facilities" class="form-control"
                (input)="search($event.target.value)">
              <span class="input-group-text search-icon p-0 px-2">
                <a>
                  <svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 26 26"
                    style="enable-background:new 0 0 26 26;" xml:space="preserve">
                    <g>
                      <path d="M22.8,22L18,17.1c1.3-1.5,2.1-3.5,2.1-5.6c0-4.7-3.8-8.5-8.5-8.5C6.8,3,3,6.8,3,11.5S6.8,20,11.5,20c2.1,0,4.1-0.8,5.6-2.1
                                            l4.9,4.9c0.1,0.1,0.3,0.2,0.4,0.2s0.3-0.1,0.4-0.2C23.1,22.6,23.1,22.2,22.8,22z M4.2,11.5c0-4,3.3-7.3,7.3-7.3s7.3,3.3,7.3,7.3
                                            s-3.3,7.3-7.3,7.3C7.5,18.9,4.2,15.6,4.2,11.5z" />
                    </g>
                  </svg>
                </a>
              </span>
            </div>


          </div>
          <div class="d-flex flex-wrap">
            <div class="flex-shrink-0 mr-2">
              <button class="btn site-btn-outlined" (click)="export()">
                EXPORT
              </button>
            </div>
            <div class="flex-shrink-0">
              <div class="dropdown">
                <a class="btn site-btn-outlined dropdown-toggle" role="button" id="dropdownMenuLinkimport"
                  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  IMPORT
                </a>

                <input #facilityImportInput type="file" style="display: none;" id="ctrlImportBeneficiary"
                  accept='application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'
                  (change)="onImportFacilityDataSelected($event.target.files)">

                <div class="dropdown-menu dropdown-menu-right py-0" aria-labelledby="dropdownMenuLinkexport">
                  <a (click)="downloadTemplate()" class="dropdown-item py-2">Download Template</a>
                  <hr class="p-0 m-0">
                  <a (click)="openFacilityFileBrowser()" class="dropdown-item py-2">Import</a>
                  <hr class="p-0 m-0">
                </div>


              </div>
            </div>
          </div>

        </div>


        <!-- filer accordion start -->

        <div class="accordion" id="accordionExample">
          <facility-filter #filter (filterComplete)="filterComplete($event)"></facility-filter>

        </div>


        <!-- filer accordion end -->

        <!-- table info start -->

        <facility-filter-text [facilityFilterModel]="facilityFilterModel"
          (removeFilterClicked)="facilityFilterRemove($event)"></facility-filter-text>

        <!-- table info end -->


        <div class="full-table-ctl">
          <!-- table control start -->
          <div>
            <div class="table-control-head" id=#table-control-head-default>
              <div class="d-flex flex-wrap mt-5">
              </div>
              <!-- table option start -->

              <div [ngClass]="{ 'show-context-menu': facilitySelected }" class=" table-cell-options py-2 px-2"
                id=#table-cell-option-show-hide>
                <div class="d-flex flex-wrap">
                  <p class="my-auto flex-grow-1 ml-2"><span
                      class="mr-2">{{facilitySelectedSize}}</span><span>Facility(s) selected</span></p>
                  <div class="d-flex">
                    <a class="site-btn-outlined-white-borderd py-2 px-3 mr-3" (click)="editFacility()">
                      <span class="mr-3">Edit</span>
                      <span>
                        <i class="fa fa-pencil-alt"></i>
                      </span>
                    </a>
                    <a data-toggle="modal" (click)="selectTeacherClicked()"
                      class="site-btn-outlined-white-borderd py-2 px-3 mr-3">
                      <span class="mr-3">Assign Teacher</span>
                      <span>
                        <svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 26 26"
                          style="enable-background:new 0 0 26 26;" xml:space="preserve">
                          <g>
                            <g>
                              <g>
                                <g>
                                  <path d="M22.7,3L22.7,3H3.3C3.1,3,3,3.1,3,3.3c0,0,0,0,0,0V10h0.7V3.7h18.7V11H10.7v0.7h12c0.2,0,0.3-0.1,0.3-0.3c0,0,0,0,0,0
                                        v-8C23,3.1,22.9,3,22.7,3z" />
                                </g>
                              </g>
                            </g>
                            <g>
                              <g>
                                <g>
                                  <rect x="14" y="4.7" width="6.7" height="0.7" />
                                </g>
                              </g>
                            </g>
                            <g>
                              <g>
                                <g>
                                  <rect x="15" y="6.7" width="6.7" height="0.7" />
                                </g>
                              </g>
                            </g>
                            <g>
                              <g>
                                <g>
                                  <rect x="13.7" y="8.7" width="6.7" height="0.7" />
                                </g>
                              </g>
                            </g>
                            <g>
                              <g>
                                <g>
                                  <path d="M13.6,5.9c-0.2-0.5-0.9-0.8-1.4-0.6c0,0,0,0,0,0L9.5,6.7C9.6,6.5,9.7,6.2,9.7,6c0-0.9-0.7-1.7-1.7-1.7S6.3,5.1,6.3,6
                                        c0,0.4,0.1,0.7,0.3,1h0C5.7,7,4.9,7.6,4.5,8.5l-0.9,3.1c-0.2,0.6,0.1,1.2,0.6,1.4C4.5,13,4.8,13,5,12.9c0.3-0.1,0.5-0.3,0.6-0.6
                                        L6,11.2V16c-0.3-0.2-0.6-0.3-1-0.3c-0.9,0-1.7,0.7-1.7,1.7c0,0.5,0.2,0.9,0.5,1.2C3.3,18.8,3,19.3,3,19.9v2.8
                                        C3,22.9,3.1,23,3.3,23h0h3.3C6.9,23,7,22.9,7,22.7c0,0,0,0,0,0v-2.8c0-0.5-0.2-0.9-0.6-1.2h2.5c-0.4,0.3-0.6,0.7-0.6,1.2v2.8
                                        c0,0.2,0.1,0.3,0.3,0.3c0,0,0,0,0,0H12c0.2,0,0.3-0.1,0.3-0.3c0,0,0,0,0,0v-2.8c0-0.6-0.3-1.1-0.8-1.4c0.7-0.6,0.7-1.7,0-2.4
                                        c-0.4-0.4-1-0.6-1.5-0.5V8.9l3.1-1.6C13.6,7.1,13.9,6.4,13.6,5.9z M8,5c0.6,0,1,0.4,1,1S8.6,7,8,7C7.4,7,7,6.6,7,6
                                        C7,5.4,7.4,5,8,5z M5,16.3c0.6,0,1,0.4,1,1s-0.4,1-1,1s-1-0.4-1-1C4,16.8,4.4,16.3,5,16.3z M6.3,22.3H3.7v-2.5
                                        c0-0.5,0.4-0.9,0.9-0.9h0.9c0.5,0,0.9,0.4,0.9,0.9V22.3z M11.7,19.9v2.5H9v-2.5C9,19.4,9.4,19,9.9,19h0.9
                                        C11.3,19,11.7,19.4,11.7,19.9z M10.3,16.3c0.6,0,1,0.4,1,1c0,0.6-0.4,1-1,1s-1-0.4-1-1S9.8,16.3,10.3,16.3z M13,6.4
                                        c0,0.1-0.1,0.2-0.3,0.2L9.5,8.4C9.4,8.4,9.3,8.5,9.3,8.7V16c-0.6,0.5-0.8,1.3-0.5,2H8.3v-5.7H7.7V18H6.5
                                        c0.1-0.2,0.1-0.4,0.1-0.7h0V9c0-0.2-0.1-0.3-0.3-0.3C6.2,8.7,6.1,8.8,6,8.9l-1,3.2c-0.1,0.2-0.3,0.3-0.5,0.2c0,0,0,0,0,0
                                        c-0.2-0.1-0.3-0.3-0.2-0.5l0.9-3.1c0.2-0.6,0.8-1,1.5-1H9c0.1,0,0.1,0,0.2,0l3.3-1.7c0.2-0.1,0.4,0,0.5,0.2
                                        C13.1,6.2,13.1,6.3,13,6.4z" />
                                </g>
                              </g>
                            </g>
                            <g>
                              <g>
                                <g>
                                  <path d="M16.8,18.5c0.7-0.6,0.7-1.7,0-2.4c-0.6-0.7-1.7-0.7-2.4,0c-0.7,0.6-0.7,1.7,0,2.4c0,0,0,0,0,0c-0.5,0.3-0.8,0.8-0.8,1.4
                                        v2.8c0,0.2,0.1,0.3,0.3,0.3c0,0,0,0,0,0h3.3c0.2,0,0.3-0.1,0.3-0.3c0,0,0,0,0,0v-2.8C17.7,19.3,17.3,18.8,16.8,18.5z M15.7,16.3
                                        c0.6,0,1,0.4,1,1s-0.4,1-1,1c-0.6,0-1-0.4-1-1C14.7,16.8,15.1,16.3,15.7,16.3z M17,22.3h-2.7v-2.5c0-0.5,0.4-0.9,0.9-0.9h0.9
                                        c0.5,0,0.9,0.4,0.9,0.9V22.3z" />
                                </g>
                              </g>
                            </g>
                            <g>
                              <g>
                                <g>
                                  <path d="M22.2,18.5c0.7-0.6,0.7-1.7,0-2.4c-0.6-0.7-1.7-0.7-2.4,0c-0.7,0.6-0.7,1.7,0,2.4c0,0,0,0,0,0c-0.5,0.3-0.8,0.8-0.8,1.4
                                        v2.8c0,0.2,0.1,0.3,0.3,0.3h0h3.3c0.2,0,0.3-0.1,0.3-0.3c0,0,0,0,0,0v-2.8C23,19.3,22.7,18.8,22.2,18.5z M21,16.3
                                        c0.6,0,1,0.4,1,1s-0.4,1-1,1s-1-0.4-1-1C20,16.8,20.4,16.3,21,16.3z M22.3,22.3h-2.7v-2.5c0-0.5,0.4-0.9,0.9-0.9h0.9
                                        c0.5,0,0.9,0.4,0.9,0.9V22.3z" />
                                </g>
                              </g>
                            </g>
                          </g>
                        </svg>


                      </span>
                    </a>

                  </div>
                </div>
              </div>
              <!-- table option end -->
            </div>

          </div>
          <!-- table control end -->

          <!-- table start -->
          <div class>
            <div class="site-table">
              <div class="table-responsive">
                <page-size-selector (onPageSizeChanged)="onPageSizeChanged($event)"
                  [totalItems]="pagedFacilities?.total" [size]="page.size"></page-size-selector>


                <ngx-datatable class='material' [columnMode]="ColumnMode.force" [selected]="selected"
                  [selectionType]="SelectionType.checkbox" (select)="onNgxDataTableSelect($event)"
                  [selectAllRowsOnPage]="true" [rowIdentity]="rowIdentity" [externalPaging]="true"
                  [count]="page.totalElements" [offset]="page.pageNumber" [limit]="page.size" (page)="setPage($event)"
                  (activate)="onActivate($event)" [rows]="rows" [columns]="columns" [scrollbarH]="true"
                  [rowClass]="getRowClass" [headerHeight]="50" [footerHeight]="50" rowHeight="auto"
                  [virtualization]="false">
                  <ngx-datatable-footer>
                    <ng-template ngx-datatable-footer-template let-rowCount="rowCount" let-pageSize="pageSize"
                      let-selectedCount="selectedCount" let-curPage="curPage" let-offset="offset">

                      <div>
                        Selected: {{getSelected}} of {{rowCount}} total
                      </div>
                      <datatable-pager [pagerLeftArrowIcon]="'datatable-icon-left'"
                        [pagerRightArrowIcon]="'datatable-icon-right'" [pagerPreviousIcon]="'datatable-icon-prev'"
                        [pagerNextIcon]="'datatable-icon-skip'" [page]="curPage" [size]="pageSize" [count]="rowCount"
                        [hidden]="!((rowCount / pageSize) > 1)" (change)="setPage($event)">
                      </datatable-pager>
                    </ng-template>
                  </ngx-datatable-footer>
                </ngx-datatable>

                <ng-template #hdrTpl let-column="column" ngx-datatable-header-template>
                  <span container="body" ngbTooltip="{{column.name}}">
                    {{column.name}}
                  </span>
                </ng-template>
                <ng-template #customCellTpl let-column="column" let-row="row" ngx-datatable-cell-template
                  let-value="value">
                  <span container="body" ngbTooltip="{{value}}">
                    {{value}}
                  </span>
                </ng-template>


              </div>

            </div>
          </div>
          <!-- table end -->
        </div>



        <!-- assign teacher modal -->
        <div class="modal fade assignTeacher" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">

            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Assign Teacher</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form>
                  <div class="input-group mb-3 searchbox-with-filter">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <a class="filter-btn">
                          <span class="px-2">Search</span>
                        </a>

                      </span>

                    </div>
                    <input [(ngModel)]="teacherPaginationConfig.searchText" name="teacherSearch" type="text"
                      class="form-control" aria-label="Amount (to the nearest dollar)">
                    <span class="input-group-text search-icon p-0 px-2">
                      <a>
                        <svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 26 26"
                          style="enable-background:new 0 0 26 26;" xml:space="preserve">
                          <g>
                            <path d="M22.8,22L18,17.1c1.3-1.5,2.1-3.5,2.1-5.6c0-4.7-3.8-8.5-8.5-8.5C6.8,3,3,6.8,3,11.5S6.8,20,11.5,20c2.1,0,4.1-0.8,5.6-2.1
                                  l4.9,4.9c0.1,0.1,0.3,0.2,0.4,0.2s0.3-0.1,0.4-0.2C23.1,22.6,23.1,22.2,22.8,22z M4.2,11.5c0-4,3.3-7.3,7.3-7.3s7.3,3.3,7.3,7.3
                                  s-3.3,7.3-7.3,7.3C7.5,18.9,4.2,15.6,4.2,11.5z" />
                          </g>
                        </svg>
                      </a>
                    </span>
                  </div>
                </form>
                <div class="p-0">
                  <div class="">
                    <div class="site-table">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th class="btn-tableCellWidth" scope="col"></th>
                            <th colspan="2" scope="col">Name</th>
                            <th class="last-tableCellWidth" scope="col">Designation</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let cam of teachers | paginate: teacherPaginationConfig">
                            <td class="btn-tableCell" scope="row">
                              <div class="form-check">
                                <input type="radio" class="form-check-input" name="instanceRadio"
                                  (change)="teacherRadioOnChange(cam)" [checked]="cam.id == selectedCampId" />
                              </div>
                            </td>
                            <td colspan="2">
                              <div>{{cam.fullName}}</div>
                            </td>
                            <td colspan="2">
                              <div>{{cam.designation}}</div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div class=" border-top pt-3">
                    <pagination-controls id='teacher_pagination' (pageChange)="pageChangedTeacher(p=$event)"
                      class="d-flex justify-content-end pt-3">
                    </pagination-controls>
                  </div>
                </div>


              </div>
              <div class="modal-footer">
                <a type="button" #assignTeacherClose class="btn site-btn-cutom-link"
                  data-dismiss="modal"><span>Cancel</span></a>
                <a type="button" (click)="selectTeacherClicked()" class="btn site-btn-primary"><span>Assign</span></a>
              </div>
            </div>

          </div>
        </div>
        <!-- modal end assign teacher  -->











        <!-- assign teacher modal -->
        <div class="modal fade assignTeacher" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
          aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered modal-lg modal-dialog-scrollable">

            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Assign Teacher</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form>
                  <div class="input-group mb-3 searchbox-with-filter">
                    <div class="input-group-prepend">
                      <span class="input-group-text">
                        <a class="filter-btn">
                          <span class="px-2">Search</span>
                        </a>

                      </span>

                    </div>
                    <input [(ngModel)]="teacherPaginationConfig.searchText" name="teacherSearch" type="text"
                      class="form-control" aria-label="Amount (to the nearest dollar)">
                    <span class="input-group-text search-icon p-0 px-2">
                      <a>
                        <svg version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 26 26"
                          style="enable-background:new 0 0 26 26;" xml:space="preserve">
                          <g>
                            <path d="M22.8,22L18,17.1c1.3-1.5,2.1-3.5,2.1-5.6c0-4.7-3.8-8.5-8.5-8.5C6.8,3,3,6.8,3,11.5S6.8,20,11.5,20c2.1,0,4.1-0.8,5.6-2.1
                                  l4.9,4.9c0.1,0.1,0.3,0.2,0.4,0.2s0.3-0.1,0.4-0.2C23.1,22.6,23.1,22.2,22.8,22z M4.2,11.5c0-4,3.3-7.3,7.3-7.3s7.3,3.3,7.3,7.3
                                  s-3.3,7.3-7.3,7.3C7.5,18.9,4.2,15.6,4.2,11.5z" />
                          </g>
                        </svg>
                      </a>
                    </span>
                  </div>
                </form>
                <div class="p-0">
                  <div class="">
                    <div class="site-table">
                      <table class="table table-hover">
                        <thead>
                          <tr>
                            <th class="btn-tableCellWidth" scope="col"></th>
                            <th colspan="2" scope="col">Name</th>
                            <th class="last-tableCellWidth" scope="col">Designation</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngFor="let cam of teachers | paginate: teacherPaginationConfig">
                            <td class="btn-tableCell" scope="row">
                              <div class="form-check">
                                <input type="radio" class="form-check-input" name="instanceRadio"
                                  (change)="teacherRadioOnChange(cam)" [checked]="cam.id == selectedCampId" />
                              </div>
                            </td>
                            <td colspan="2">
                              <div>{{cam.fullName}}</div>
                            </td>
                            <td colspan="2">
                              <div>{{cam.designation}}</div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div class=" border-top pt-3">
                    <pagination-controls id='teacher_pagination' (pageChange)="pageChangedTeacher(p=$event)"
                      class="d-flex justify-content-end pt-3">
                    </pagination-controls>



                  </div>

                </div>


              </div>
              <div class="modal-footer">
                <a type="button" #assignTeacherClose class="btn site-btn-cutom-link"
                  data-dismiss="modal"><span>Cancel</span></a>
                <a type="button" (click)="selectTeacherClicked()" class="btn site-btn-primary"><span>Assign</span></a>
              </div>
            </div>

          </div>
        </div>
        <!-- modal end assign teacher  -->








      </div>
    </div>
  </div>
</div>